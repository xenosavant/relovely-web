<div class="product-container-wrapper">
    <ng-container *ngIf="mobile && !loading">
        <div class="profile-container" (click)="goToProfile($event)">
            <div class="profile-image-wrapper">
                <app-avatar [image]="product.seller.profileImageUrl"></app-avatar>
            </div>
            <div class="product-user-name">
                {{product.sellerUsername}}
            </div>
        </div>
        <owl-carousel-o [options]="carouselOptions" (changed)="carouselTranslated($event)" appOwlPreventClick
            #featuredCarousel>
            <ng-template *ngIf="product.videos[0]" carouselSlide>
                <div class="video-slide-wrapper">
                    <app-video-player [publicId]="product.videos[0].publicId" [controls]="true">
                    </app-video-player>
                </div>
            </ng-template>
            <ng-container *ngFor="let image of product.images, let i = index">
                <ng-template carouselSlide>
                    <a appClick target="_blank">
                        <img [src]="image.cropped" alt="" #imageElement>
                    </a>
                </ng-template>
            </ng-container>
        </owl-carousel-o>
        <div class="info-container">
            <div class="info">
                <div class="product-name">
                    {{product.title}}
                </div>
                <div class="product-price">
                    {{product.price | currency}} <span class="retail">{{product.price + 50 | currency}}</span>
                </div>
                <div class="product-size">
                    <span class="title">Size:</span>
                    <strong>{{product.size}}</strong>
                </div>
            </div>
            <div class="action">
                <app-button type="accent">Buy Now!</app-button>
            </div>
        </div>
        <div class="product-details">
            {{product.description}}
        </div>
        <app-horizontal-product-list (clicked)="goToProduct($event)" [products]="product.moreItems"
            [subtitle]="product.sellerUsername" [title]="'MORE FROM'">
        </app-horizontal-product-list>
        <app-horizontal-product-list (clicked)="goToProduct($event)" [title]="'SIMILAR ITEMS'"
            [products]="product.similarItems">
        </app-horizontal-product-list>
    </ng-container>
    <div *ngIf="!mobile && !loading" class="grid-wrapper">
        <div class="image-wrapper">
            <div class="product">
                <div *ngIf="currentItem.publicId">
                    <div class="video-desktop-wrapper" [style.padding-bottom.%]="videoPadding"
                        [style.padding-top.%]="videoPadding">
                        <app-video-player [publicId]="product.videos[0].publicId" [controls]="true">
                        </app-video-player>
                    </div>
                </div>
                <img *ngIf="!currentItem.publicId" [src]="currentItem">
            </div>
            <div class="preview">
                <div *ngIf="product.videos[0]" class="video-desktop-wrapper">
                    <img (click)="setActiveItem(product.videos[0])" [src]="videoThumbnail">
                </div>
                <ng-container *ngFor="let image of product.images">
                    <span class="product-gallery__carousel-item" appClick (click)="setActiveItem(image.cropped)">
                        <img class="product-gallery__carousel-image" [src]="image.cropped" alt="">
                    </span>
                </ng-container>
            </div>
        </div>
        <div class="desktop-wrapper" *ngIf="!mobile">
            <div class="desktop-info-wrapper">
                <h1>{{product.title}}</h1>
                <div class="user-wrapper">
                    <app-avatar [image]="product.seller.imageUrl" (click)="goToProfile()">
                    </app-avatar>
                    <div>
                        @{{product.seller.username}}
                    </div>
                </div>
                <div class="product-price">
                    {{product.price | currency}}
                </div>
                <div class="size-wrapper">
                    Size: <strong>{{product.size || 'One Size'}}</strong>
                </div>
                <div class="button-wrapper">
                    <app-button type="accent" (click)="onClose($event)">
                        Buy Now
                    </app-button>
                </div>
                <div class="description">
                    {{product.description}}
                </div>
            </div>
        </div>
    </div>
</div>